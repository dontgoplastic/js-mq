{"version":3,"file":null,"sources":["node_modules/matchmedia-polyfill/matchMedia.js","node_modules/matchmedia-polyfill/matchMedia.addListener.js","src/mq-on.js"],"sourcesContent":["/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */\n\nwindow.matchMedia || (window.matchMedia = function() {\n    \"use strict\";\n\n    // For browsers that support matchMedium api such as IE 9 and webkit\n    var styleMedia = (window.styleMedia || window.media);\n\n    // For those that don't support matchMedium\n    if (!styleMedia) {\n        var style       = document.createElement('style'),\n            script      = document.getElementsByTagName('script')[0],\n            info        = null;\n\n        style.type  = 'text/css';\n        style.id    = 'matchmediajs-test';\n\n        script.parentNode.insertBefore(style, script);\n\n        // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\n        info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;\n\n        styleMedia = {\n            matchMedium: function(media) {\n                var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';\n\n                // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\n                if (style.styleSheet) {\n                    style.styleSheet.cssText = text;\n                } else {\n                    style.textContent = text;\n                }\n\n                // Test if media query is true or false\n                return info.width === '1px';\n            }\n        };\n    }\n\n    return function(media) {\n        return {\n            matches: styleMedia.matchMedium(media || 'all'),\n            media: media || 'all'\n        };\n    };\n}());\n","/*! matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */\n(function(){\n    // Bail out for browsers that have addListener support\n    if (window.matchMedia && window.matchMedia('all').addListener) {\n        return false;\n    }\n\n    var localMatchMedia = window.matchMedia,\n        hasMediaQueries = localMatchMedia('only all').matches,\n        isListening     = false,\n        timeoutID       = 0,    // setTimeout for debouncing 'handleChange'\n        queries         = [],   // Contains each 'mql' and associated 'listeners' if 'addListener' is used\n        handleChange    = function(evt) {\n            // Debounce\n            clearTimeout(timeoutID);\n\n            timeoutID = setTimeout(function() {\n                for (var i = 0, il = queries.length; i < il; i++) {\n                    var mql         = queries[i].mql,\n                        listeners   = queries[i].listeners || [],\n                        matches     = localMatchMedia(mql.media).matches;\n\n                    // Update mql.matches value and call listeners\n                    // Fire listeners only if transitioning to or from matched state\n                    if (matches !== mql.matches) {\n                        mql.matches = matches;\n\n                        for (var j = 0, jl = listeners.length; j < jl; j++) {\n                            listeners[j].call(window, mql);\n                        }\n                    }\n                }\n            }, 30);\n        };\n\n    window.matchMedia = function(media) {\n        var mql         = localMatchMedia(media),\n            listeners   = [],\n            index       = 0;\n\n        mql.addListener = function(listener) {\n            // Changes would not occur to css media type so return now (Affects IE <= 8)\n            if (!hasMediaQueries) {\n                return;\n            }\n\n            // Set up 'resize' listener for browsers that support CSS3 media queries (Not for IE <= 8)\n            // There should only ever be 1 resize listener running for performance\n            if (!isListening) {\n                isListening = true;\n                window.addEventListener('resize', handleChange, true);\n            }\n\n            // Push object only if it has not been pushed already\n            if (index === 0) {\n                index = queries.push({\n                    mql         : mql,\n                    listeners   : listeners\n                });\n            }\n\n            listeners.push(listener);\n        };\n\n        mql.removeListener = function(listener) {\n            for (var i = 0, il = listeners.length; i < il; i++){\n                if (listeners[i] === listener){\n                    listeners.splice(i, 1);\n                }\n            }\n        };\n\n        return mql;\n    };\n}());\n","import _ from 'underscore';\nimport 'matchmedia-polyfill';\nimport 'matchmedia-polyfill/matchMedia.addListener.js';\n\n// @TODO es6 this up\n// @TODO lodash not working?\n\nconst queries        = [];\nconst callbacks      = [];\nlet readyCallbacks = [];\nlet prevState      = null;\nlet currState      = null;\n\nconst onMediaQueryDebounced    = _.debounce(onMediaQuery, 0);\nconst updateCurrStateDebounced = _.debounce(updateCurrState, 0);\n\n// @TODO allow inverse registration:\n// mq.on('not-xs', () => { ... })\nconst inversePrefix = 'not-';\n\nfunction register(val) {\n  if (Array.isArray(val)) {\n    _.each(val, doRegister);\n  } else {\n    doRegister(val);\n  }\n};\n\nfunction doRegister(o) {\n\n  // @TODO restrict + validate query names\n\n  if (_.chain(queries).pluck('name').contains(o.name).value()) {\n    // @TODO Test for existing name & value and just ignore if they both match\n    throw new Error('Media Query \\'name\\' values must be unique. Attempted to register: ' + o.name);\n  }\n\n  var mediaQueryList  = window.matchMedia(o.query);\n  mediaQueryList.addListener(onMediaQueryDebounced);\n\n  queries.push({\n    name: o.name,\n    mediaQueryList: mediaQueryList\n  });\n\n  updateCurrStateDebounced();\n};\n\n\nfunction getState(withInverse) {\n  if (withInverse) {\n    // @TODO cache this\n    var prefix = inversePrefix;\n    var allNames = _.pluck(queries, 'name');\n    var notCurr = _.map(_.difference(allNames, currState), function(name) {\n      return prefix + name;\n    });\n    return currState.concat(notCurr);\n  } else {\n    return currState;\n  }\n};\n\n\nfunction on() {\n  // matchesOn, matchesFrom (optional), callback\n  var args = _.toArray(arguments);\n\n  if (args.length === 2) {\n    args.splice(1, 0, '*');\n  }\n\n  callbacks.push({matchesOn: args[0], matchesFrom: args[1], callback: args[2]});\n};\n\n\nfunction is(name) {\n  if (!currState) {\n    onMediaQuery();\n  }\n  return _.indexOf(currState, name) !== -1;\n};\n\n\nfunction ready(callback) {\n  if (readyCallbacks === null) {\n    callback();\n  } else {\n    readyCallbacks.push(callback);\n  }\n};\n\nfunction trigger() {\n  onMediaQuery(false);\n};\n\n\n\nfunction updateCurrState() {\n\n  prevState = currState;\n  currState = [];\n\n  _.each(queries, function(query) {\n    var queryName      = query.name;\n    var mediaQueryList = query.mediaQueryList;\n\n    if (mediaQueryList.matches) {\n      currState.push(queryName);\n    }\n  });\n\n  if (!prevState) {\n    prevState = currState;\n  }\n\n  if (readyCallbacks !== null) {\n    _.invoke(readyCallbacks, 'call');\n    readyCallbacks = null;\n  }\n}\n\nfunction onMediaQuery(evaluateState) {\n\n  if (evaluateState !== false) {\n    updateCurrState();\n  }\n\n  _.each(queries, function(query) {\n    var queryName      = query.name;\n    var mediaQueryList = query.mediaQueryList;\n\n    if (mediaQueryList.matches) {\n      _.each(callbacks, function(callbackInfo) {\n\n        var matchesOn   = callbackInfo.matchesOn;\n        var matchesFrom = callbackInfo.matchesFrom;\n\n        if (\n          (\n            matchesOn === '*' ||\n            _.chain(matchesOn.split(' ')).contains(queryName).value() // @TODO precompute the split\n          ) && (\n            matchesFrom === '*' ||\n            _.intersection(matchesFrom.split(' '), prevState).length // @TODO precompute the split\n          )\n        ) {\n          var newEventObj = _.extend({}, {\n            mediaQueryList,\n            matchesOn,\n            matchesFrom,\n            queryName,\n            prevState,\n            currState\n          });\n          callbackInfo.callback.call(window, newEventObj);\n        }\n      });\n    }\n  });\n}\n\nexport {inversePrefix, on, is, register, getState, trigger, ready }"],"names":["queries","callbacks","readyCallbacks","prevState","currState","onMediaQueryDebounced","_","debounce","onMediaQuery","updateCurrStateDebounced","updateCurrState","inversePrefix","register","val","Array","isArray","each","doRegister","o","chain","pluck","contains","name","value","Error","mediaQueryList","window","matchMedia","query","addListener","push","getState","withInverse","prefix","allNames","notCurr","map","difference","concat","on","args","toArray","arguments","length","splice","matchesOn","matchesFrom","callback","is","indexOf","ready","trigger","queryName","matches","invoke","evaluateState","callbackInfo","split","intersection","newEventObj","extend","call"],"mappings":"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"}